<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
	
	<!-- Optional theme -->
	<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
	
	<!-- Latest compiled and minified JavaScript -->
	<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Witek-MVC by irla</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Witek-MVC</h1>
        <h2>Simple MVC for node express</h2>
        <a href="https://github.com/irla/witek-mvc" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="witek-mvc" class="anchor" href="#witek-mvc"><span class="octicon octicon-link"></span></a>Witek-MVC</h1>

<h3>
<a name="simple-mvc-for-node-and-express" class="anchor" href="#simple-mvc-for-node-and-express"><span class="octicon octicon-link"></span></a>Simple MVC for node and express</h3>

<p>Witek has two functions - he initialise controllers and load config files.</p>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<pre><code>$ npm install witek --save
</code></pre>

<p>(<code>--save</code> automatically writes to your <code>package.json</code> file, tell your friends)</p>

<h3>
<a name="start" class="anchor" href="#start"><span class="octicon octicon-link"></span></a>Start</h3>

<p>Traditional <code>app.js</code> is used as a starting point of the app, but anything what is required is to tell Witek to load config files.</p>

<pre><code>var app = require('express')();
require('witek').load(app, __dirname + '/config');
</code></pre>

<h3>
<a name="config-load" class="anchor" href="#config-load"><span class="octicon octicon-link"></span></a>Config load</h3>

<p>Config structure is based on locomotivejs framework. Witek expects to have config folder strucuture as folows:</p>

<pre><code> # config
   # enfironment
      - all.js
      - development.js
      - stage.js
      - live.js
   # initilizers
      - 01_view_engine.js
      - 02_auth.js
      - 10_controllers.js
      - 99_last.js
</code></pre>

<p>At first it loads enviroment depend file from <code>environment</code> folder, then <code>all.js</code> file is loaded. These files are good place to set express variables.</p>

<pre><code>/** This is the content of development.js file */
module.exports = function(app) {
    app.set('mongodb-uri', 'mongodb://localhost:27017/WitekDB');       
};
</code></pre>

<p>After loading enviroment depended configs, initilizers are loaded (in alphabetical order).</p>

<pre><code>/* Content of 01_view_engine.js */
var ejslocals = require('ejs-locals');
module.exports = function(app) {
    app.set('views', __dirname + '/../../views');
    app.set('view engine', 'ejs');
    app.engine('ejs', ejslocals);
};
</code></pre>

<h3>
<a name="controllers-load" class="anchor" href="#controllers-load"><span class="octicon octicon-link"></span></a>Controllers load</h3>

<p>To load controllers one of initializers can be used. Here <code>10_controllers.js</code>:</p>

<pre><code>var witek = require('witek');
module.exports = function(app) {
    witek.controllers(app, {
        controllers: app.get(__dirname + '/../../controllers'),
        viewSuffix: 'html.ejs'
    });
};
</code></pre>

<h3>
<a name="controllers-description" class="anchor" href="#controllers-description"><span class="octicon octicon-link"></span></a>Controllers description</h3>

<p>Controller should be simple JavaScript object, it's functions will be automatically mapped to url. Let's say we have controller with name <code>example_controller.js</code> action below - </p>

<pre><code>exports.actions = {
   'example_action': function(req, res, next) { }; 
};
</code></pre>

<p>will be mapped to GET http://yourapphost/example_controller/example_action</p>

<h4>
<a name="rest-actions" class="anchor" href="#rest-actions"><span class="octicon octicon-link"></span></a>REST actions</h4>

<p>Witek define 7 default actions which are treated as default REST actions. Name of controller is <code>albums.js</code>.</p>

<pre><code>/** This is the source of albums.js controller */
exports.actions = {
   'index': function(){},  // This will be mapped to GET http://yourapphost/albums
   'show': function(){},   // GET    http://yourapphost/albums/:id
   'new': function(){},    // GET    http://yourapphost/albums/new
   'create': function(){}, // POST   http://yourapphost/albums
   'edit': function(){},   // GET    http://yourapphost/albums/:id/edit
   'update': function(){}, // PUT    http://yourapphost/albums/:id
   'del': function(){},    // DELETE http://yourapphost/albums/:id
};
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/irla/witek-mvc/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/irla/witek-mvc/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/irla/witek-mvc"></a> is maintained by <a href="https://github.com/irla">irla</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46907518-1', 'irla.github.io');
  ga('send', 'pageview');

</script>

  </body>
</html>